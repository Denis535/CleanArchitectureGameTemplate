// add-style
add-style(selector)
    flush()
    define('context--selector', selector, true)
    define('context--styles',   (),       true)

// property
property(name, value)
    push(context--styles, @block {
        add-property(name, value)
    })

// view
font(url, size, style)
    push(context--styles, @block {
        add-font(url, size, style)
    })
text(align, outline, shadow)
    push(context--styles, @block {
        add-text(align, outline, shadow)
    })

// view
view(color, background-color, background-image, border-color, border-radius)
    push(context--styles, @block {
        add-view(color, background-color, background-image, border-color, border-radius)
    })
image(background-image)
    push(context--styles, @block {
        add-view(null, null, background-image, null, null)
    })

// layout
layout(position, width, height, margin, border, padding)
    push(context--styles, @block {
        add-layout(position, width, height, margin, border, padding)
    })

// flex
flex(flex-grow, flex-shrink, flex-basis, align-self)
    push(context--styles, @block {
        add-flex(flex-grow, flex-shrink, flex-basis, align-self)
    })
flex2(flex-direction, justify-content, align-items)
    push(context--styles, @block {
        add-flex2(flex-direction, justify-content, align-items)
    })

// flush
flush()
    if context--selector is defined and context--selector != null
        selector = replace('(\s+)', ' ', get-value(get-key('selector', context--selector)))
        styles   = context--styles
        {selector}
            for style in styles
                {style}
    define('context--selector', null, true)
    define('context--styles',   null, true)
