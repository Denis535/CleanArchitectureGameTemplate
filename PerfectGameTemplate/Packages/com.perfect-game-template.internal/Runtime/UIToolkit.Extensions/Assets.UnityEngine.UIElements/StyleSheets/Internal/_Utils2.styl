@import "_Utils"

// create-theme
create-theme()
    return {
        color: {},
        background-color: {},
        background-image: {},
        border-color: {},
        border-radius: {},
    }

// has-theme-value
has-theme-value(section, key)
    has(theme[section], key)
// get-theme-value
get-theme-value(section, key, _hue = null, _saturate = null, _desaturate = null, _lighten = null, _darken = null, _alpha = null)
    value = get(theme[section], key)
    value =        hue(value, _hue       ) if value != null and _hue        != null
    value =   saturate(value, _saturate  ) if value != null and _saturate   != null
    value = desaturate(value, _desaturate) if value != null and _desaturate != null
    value =    lighten(value, _lighten   ) if value != null and _lighten    != null
    value =     darken(value, _darken    ) if value != null and _darken     != null
    value =      alpha(value, _alpha     ) if value != null and _alpha      != null
    value

// get-theme-value
get-theme-color(key, hue = null, saturate = null, desaturate = null, lighten = null, darken = null, alpha = null)
    if key != null
        return get-theme-value('color', key, hue, saturate, desaturate, lighten, darken, alpha) if has-theme-value(color, key)
        error('Theme color is not found: ' + get-string(key))
    null
get-theme-background-color(key, hue = null, saturate = null, desaturate = null, lighten = null, darken = null, alpha = null)
    if key != null
        return get-theme-value('background-color', key, hue, saturate, desaturate, lighten, darken, alpha) if has-theme-value(background-color, key)
        return get-theme-value('color',            key, hue, saturate, desaturate, lighten, darken, alpha) if has-theme-value(color,            key)
        error('Theme background-color is not found: ' + get-string(key))
    null
get-theme-background-image(key)
    if key != null
        return get-theme-value('background-image', key) if has-theme-value(background-image, key)
        error('Theme background-image is not found: ' + get-string(key))
    null
get-theme-border-color(key, hue = null, saturate = null, desaturate = null, lighten = null, darken = null, alpha = null)
    if key != null
        return get-theme-value('border-color', key, hue, saturate, desaturate, lighten, darken, alpha) if has-theme-value(border-color, key)
        return get-theme-value('color',        key, hue, saturate, desaturate, lighten, darken, alpha) if has-theme-value(color,        key)
        error('Theme border-color is not found: ' + get-string(key))
    null
get-theme-border-radius(key)
    if key != null
        return get-theme-value('border-radius', key) if has-theme-value(border-radius, key)
        error('Theme border-radius is not found: ' + get-string(key))
    null

// create-view-skin
create-view-skin(color, background, border)
    color            = get-theme-color(color)
    background-color = get-theme-background-color(background[0])
    background-image = get-theme-background-image(background[1])
    border-color     = get-theme-border-color(border[0])
    border-radius    = get-theme-border-radius(border[1])
    create-view color, null, null, background-color, background-image, border-color, border-radius

// create-layout-skin
create-layout-skin(position, size, margin, border, padding)
    create-layout position, size[0], size[1], margin, border, padding

// add-skin
add-skin1(name)
    if typeof(name) == 'object'
        add-style name
    else
        add-style get-skin1(name)
add-skin2(name)
    if typeof(name) == 'object'
        add-style name
    else
        add-style get-skin2(name)
add-skin3(name)
    if typeof(name) == 'object'
        add-style name
    else
        add-style get-skin3(name)

// get-skin
get-skin1(name)
    if name != null and name != none
        name = 'view--' + get-string(name)
        return lookup(name) if is-defined(name)
        error('Skin (view) is not found: ' + name)
    null
get-skin2(name)
    if name != null and name != none
        name = 'layout--' + get-string(name)
        return lookup(name) if is-defined(name)
        error('Skin (layout) is not found: ' + name)
    null
get-skin3(name)
    if name != null and name != none
        name = 'flex--' + get-string(name)
        return lookup(name) if is-defined(name)
        error('Skin (flex) is not found: ' + name)
    null
