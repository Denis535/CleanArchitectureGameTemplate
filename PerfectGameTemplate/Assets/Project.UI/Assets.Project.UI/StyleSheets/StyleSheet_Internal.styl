// create-skin
create-view-skin(color, background-color, background-image-color, border-color, border-radius)
    return {
        foreground: {
            color: get-theme-color(color),
            font: {
                url:   null,
                size:  null,
                style: null
            },
            text: {
                align:   null,
                outline: null,
                shadow:  null
            }
        },
        background: {
            color: get-theme-background-color(background-color),
            image: {
                url:          null,
                color:        get-theme-background-image-color(background-image-color),
                scale-mode:   null,
                slice-left:   null,
                slice-right:  null,
                slice-top:    null,
                slice-bottom: null,
                slice-scale:  null
            }
        },
        border: {
            color:  get-theme-border-color(border-color),
            radius: get-theme-border-radius(border-radius)
        }
    }
create-layout-skin(position, width, height, margin, border, padding)
    return {
        position: {
            position: position
        },
        size: {
            width:  width,
            height: height
        },
        box: {
            margin:  margin,
            border:  border,
            padding: padding
        }
    }

// add-skin
add-view-skin(skin, font = null, text = null, image = null, alpha = 1, alpha2 = (alpha+3)/4)
    skin                               = get-view-skin(skin)
    skin.foreground.font.url           = font['url']     if font['url']     != null
    skin.foreground.font.size          = font['size']    if font['size']    != null
    skin.foreground.font.style         = font['style']   if font['style']   != null
    skin.foreground.text.align         = text['align']   if text['align']   != null
    skin.foreground.text.outline       = text['outline'] if text['outline'] != null
    skin.foreground.text.shadow        = text['shadow']  if text['shadow']  != null
    skin.background.color              = alpha(skin.background.color, alpha(skin.background.color) * alpha) if skin.background.color != null
    skin.background.image.url          = image.url          if image['url']          != null
    skin.background.image.color        = image.color        if image['color']        != null
    skin.background.image.scale-mode   = image.scale-mode   if image['scale-mode']   != null
    skin.background.image.slice-left   = image.slice-left   if image['slice-left']   != null
    skin.background.image.slice-right  = image.slice-right  if image['slice-right']  != null
    skin.background.image.slice-top    = image.slice-top    if image['slice-top']    != null
    skin.background.image.slice-bottom = image.slice-bottom if image['slice-bottom'] != null
    skin.background.image.slice-scale  = image.slice-scale  if image['slice-scale']  != null
    skin.border.color                  = alpha(skin.border.color, alpha(skin.border.color) * alpha2) if skin.border.color != null
    add-view skin.foreground, skin.background, skin.border
add-layout-skin(skin, position = null, width = null, height = null, margin = null, border = null, padding = null)
    skin                   = get-layout-skin(skin)
    skin.position.position = position if position != null
    skin.size.width        = width    if width    != null
    skin.size.height       = height   if height   != null
    skin.box.margin        = margin   if margin   != null
    skin.box.border        = border   if border   != null
    skin.box.padding       = padding  if padding  != null
    add-layout skin.position, skin.size, skin.box

// get-theme-value
get-theme-color(key)
    if key != null
        key = get-string(key)
        return theme['color'][key] or error('Theme has no color: ' + key)
    null
get-theme-background-color(key)
    if key != null
        key = get-string(key)
        return theme['background-color'][key] or theme['color'][key] or error('Theme has no background-color: ' + key)
    null
get-theme-background-image-color(key)
    if key != null
        key = get-string(key)
        return theme['background-image-color'][key] or theme['color'][key] or error('Theme has no background-image-color: ' + key)
    null
get-theme-border-color(key)
    if key != null
        key = get-string(key)
        return theme['border-color'][key] or theme['color'][key] or error('Theme has no border-color: ' + key)
    null
get-theme-border-radius(key)
    if key != null
        key = get-string(key)
        return theme['border-radius'][key] or error('Theme has no border-radius: ' + key)
    null

// get-skin
get-view-skin(skin)
    if skin != null
        skin = get-string(skin)
        skin = views[skin] or error('Views has no skin: ' + skin)
        return clone(skin)
    return create-view-skin(null, null, null, null, null)
get-layout-skin(skin)
    if skin != null
        skin = get-string(skin)
        skin = layouts[skin] or error('Layouts has no skin: ' + skin)
        return clone(skin)
    return create-layout-skin(null, null, null, null, null, null)